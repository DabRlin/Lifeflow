# LifeFlow 开发路线图

> 本文档记录了项目当前存在的已知问题、技术债务，以及未来可扩展的功能方向。

## 📋 目录

- [已知问题](#已知问题)
- [技术债务](#技术债务)
- [未来功能规划](#未来功能规划)
- [设计优化](#设计优化)
- [版本规划](#版本规划)

---

## 已知问题

### 高优先级

1. **热力图 N+1 查询问题**
   - HabitsPage 的打卡记录查询使用循环逐个请求每个习惯的记录
   - 影响：习惯数量多时性能下降
   - 建议：后端增加批量查询接口 `GET /api/checkins/batch`

2. **Header 组件数据获取过多**
   - 为显示上下文信息，Header 调用了 useTasks、useStatsOverview、useInfiniteLifeEntries
   - 建议：后端提供轻量级的 dashboard summary 接口

### 中优先级

3. **时间相关变量不自动更新**
   - `greeting` 问候语不会随时间变化自动更新
   - `today` 日期变量不会在午夜自动刷新
   - 影响：长时间不刷新页面时显示可能不准确
   - 建议：添加定时器或使用 `visibilitychange` 事件刷新

4. **Modal 组件样式不统一**
   - HabitsPage 中的 Modal 使用内联 style 而非 Tailwind
   - 建议：统一使用 `components/ui/modal.tsx` 组件

### 低优先级

5. **应用图标待设计**
   - 当前使用临时图标 (`public/icon.svg`)
   - 需要设计正式的应用图标 (icns/ico 格式)

---

## 技术债务

### 前端

1. **组件测试覆盖不足**
   - 部分组件缺少单元测试
   - 建议：补充 NotificationPanel、Header 等组件测试

2. **类型定义可优化**
   - 部分 API 响应类型使用 `any` 或不够精确
   - 建议：完善 TypeScript 类型定义

3. ~~**错误边界缺失**~~ ✅ 已完成
   - 已添加 `ErrorBoundary` 组件处理运行时错误

### 后端

1. **数据库迁移管理**
   - 当前使用 SQLAlchemy 自动创建表
   - 建议：引入 Alembic 进行正式的数据库迁移管理

2. **API 文档完善**
   - FastAPI 自动生成的文档可进一步完善
   - 建议：添加更详细的接口描述和示例

---

## 未来功能规划

### 🎯 核心功能增强

1. **任务管理增强**
   - [ ] 任务截止日期和提醒
   - [ ] 任务优先级标签
   - [x] 任务分类/项目归属 ✅
   - [ ] 子任务支持
   - [ ] 任务重复规则（每日/每周/每月）

2. **习惯追踪增强**
   - [ ] 自定义打卡频率（非每日）
   - [ ] 习惯分组/分类
   - [ ] 打卡备注功能
   - [ ] 习惯模板库
   - [ ] 补打卡功能

3. **生活记录增强**
   - [ ] 图片附件支持
   - [ ] 标签系统
   - [ ] 全文搜索
   - [ ] Markdown 格式支持
   - [ ] 导出为日记格式

4. **统计分析增强**
   - [ ] 自定义时间范围筛选
   - [ ] 数据对比（周/月/年）
   - [ ] 导出统计报告（PDF/图片）
   - [ ] 目标设定与追踪
   - [x] 年度热力图日历 ✅
   - [x] 打卡趋势图表 ✅

### 🔔 通知系统

- [x] 应用内通知面板 ✅
- [x] 打卡成功通知 ✅
- [x] 连胜里程碑通知 (7/30/100 天) ✅
- [ ] 系统原生通知推送
- [ ] 自定义提醒时间
- [ ] 通知免打扰时段

### 🎨 用户体验

- [ ] 深色模式支持
- [ ] 主题色自定义
- [ ] 多语言支持（i18n）
- [ ] 键盘快捷键
- [ ] 引导教程（新用户）
- [x] 拖拽排序 ✅
- [x] 骨架屏加载 ✅
- [x] 空状态提示 ✅

### 📱 跨平台

- [ ] 移动端 App（React Native / Flutter）
- [ ] Web 版本部署
- [ ] 数据云同步
- [ ] 多设备登录

### 🔐 账户系统

- [ ] 用户注册/登录
- [ ] 数据云端备份
- [x] 数据导出功能 ✅
- [ ] 数据导入功能
- [ ] 账户数据迁移

### 🤝 社交功能

- [ ] 习惯打卡分享
- [ ] 成就徽章系统
- [ ] 好友/小组功能
- [ ] 排行榜

---

## 设计优化

### UI/UX 改进

1. **搜索功能**
   - 全局搜索栏
   - 支持搜索任务、习惯、生活记录

2. **动画与过渡**
   - 页面切换动画
   - 列表项增删动画
   - 打卡成功动效增强

3. **响应式优化**
   - 移动端布局适配
   - 平板横屏模式优化

4. **无障碍支持**
   - 键盘导航完善
   - 屏幕阅读器支持
   - 高对比度模式

---

## 版本规划

| 版本 | 主要内容 | 状态 |
|------|---------|------|
| v0.1.0 | 核心功能完成（任务、习惯、记录、统计） | ✅ 已发布 |
| v0.1.1 | Bug 修复、UI 优化 | ✅ 已发布 |
| v0.2.0 | 通知系统、分类管理、进程管理优化 | ✅ 已发布 |
| v0.2.1 | UI 细节优化、进程退出修复 | ✅ 已发布 |
| v0.3.0 | 深色模式、任务截止日期 | 📋 规划中 |
| v0.4.0 | 数据导入、习惯分组 | 📋 规划中 |
| v1.0.0 | 云同步、账户系统 | 📋 规划中 |

---

## 已完成功能清单

### v0.2.x 完成的功能

- ✅ 通知系统（应用内通知面板、打卡通知、里程碑通知）
- ✅ 分类管理（创建/编辑/删除分类）
- ✅ 任务分类筛选
- ✅ 进程管理优化（优雅关闭、健康检查）
- ✅ 错误边界组件
- ✅ 数据导出功能
- ✅ UI 细节优化（hover 状态、圆角统一）
- ✅ 统计页面优化（主题色统一）
- ✅ GitHub Actions 自动构建

### 核心功能

- ✅ 任务管理（创建/编辑/删除/完成）
- ✅ 习惯追踪（打卡/连胜统计）
- ✅ 生活记录（时间线/无限滚动）
- ✅ 统计分析（环形图/趋势图/热力图）
- ✅ 拖拽排序
- ✅ 响应式侧边栏

---

*最后更新：2025-12-20*
